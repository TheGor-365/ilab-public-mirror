<% provide :page_title, 'Cart' %>
<% currently_at 'Cart' %>

<div class="container-xxl cart-page" data-controller="cart">
  <div class="row g-3 g-lg-4">
    <aside class="col-12 col-lg-2">
      <%= render 'cart/cart_show_nav' %>
    </aside>

    <main class="col-12 col-lg-7">
      <div class="glass-panel rounded-4 shadow-sm p-3 p-sm-4 mb-3">
        <h3 class="h4 mb-0">
          Корзина
          <span class="text-muted small">(<span id="cart-count"><%= @items_count %></span> шт.)</span>
        </h3>
      </div>

      <%= turbo_frame_tag "cart_table" do %>
        <% if @order_items.any? %>
          <%= render 'cart/items_table', order_items: @order_items, grouped: @grouped_items %>
        <% else %>
          <%= render 'cart/empty_cart' %>
        <% end %>
      <% end %>
    </main>

    <aside class="col-12 col-lg-3">
      <%= turbo_frame_tag "cart_summary" do %>
        <%= render 'cart/summary', subtotal: @subtotal, delivery: @delivery_price, amount: @amount %>
      <% end %>

      <div class="mt-3">
        <%= render 'cart/cart_info_card' %>
      </div>
    </aside>
  </div>
</div>
