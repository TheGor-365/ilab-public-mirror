<div class="p-3">
  <div class="d-flex align-items-start gap-3 mb-3">
    <div class="flex-shrink-0">
      <% if spare_part.avatar.present? %>
        <%= image_tag(spare_part.avatar.url, class: "rounded", width: 88, height: 88) %>
      <% else %>
        <%= image_tag("default_product_avatar.jpg", class: "rounded", width: 88, height: 88) %>
      <% end %>
    </div>
    <div class="flex-grow-1">
      <h5 class="mb-1"><%= spare_part.try(:name) || spare_part.try(:title) || "Spare Part ##{spare_part.id}" %></h5>
      <div class="small text-muted d-flex flex-wrap gap-2">
        <span class="badge bg-light text-dark">Gen: <%= spare_part.generation_id || "—" %></span>
        <% if spare_part.phone_id.present? %><span class="badge bg-light text-dark">Phone: <%= spare_part.phone_id %></span><% end %>
        <% if spare_part.mod_id.present? %><span class="badge bg-light text-dark">Module: <%= spare_part.mod_id %></span><% end %>
        <% if spare_part.manufacturer.present? %><span class="badge bg-light text-dark">Maker: <%= spare_part.manufacturer %></span><% end %>
      </div>
    </div>
  </div>

  <% if spare_part.images.present? %>
    <div class="mb-3">
      <div class="fw-semibold mb-2">Фото</div>
      <div class="row g-2">
        <% spare_part.images.each do |image| %>
          <div class="col-6 col-md-4 col-lg-3"><%= image_tag(image.url, class: "img-fluid rounded border") %></div>
        <% end %>
      </div>
    </div>
  <% end %>

  <% if spare_part.videos.present? %>
    <div class="mb-3">
      <div class="fw-semibold mb-2">Видео</div>
      <div class="ratio ratio-16x9">
        <%= video_tag(spare_part.videos, controls: true, class: "rounded border") %>
      </div>
    </div>
  <% end %>

  <div class="d-flex flex-wrap gap-2">
    <%= link_to "Открыть полную страницу", spare_part_path(spare_part), class: "btn btn-sm btn-outline-white" %>
    <%= link_to "Редактировать", edit_spare_part_path(spare_part), class: "btn btn-sm btn-outline-dark" %>

    <% if turbo_frame_request? %>
      <a href="#"
         class="btn btn-sm btn-light ms-auto"
         data-controller="frame-reset"
         data-frame-reset-frame-id-value="spare_part_details"
         data-frame-reset-placeholder-value='<div class="text-center text-muted py-5"><div class="mb-2">Выберите запчасть слева, чтобы увидеть детали.</div><small>Поддерживаются Turbo-frames.</small></div>'
         data-action="click->frame-reset#toPlaceholder">
        Назад
      </a>
      <a href="#" class="btn btn-sm btn-outline-light text-dark" data-controller="frame-reset" data-action="click->frame-reset#closeModal">
        Закрыть
      </a>
    <% end %>
  </div>
</div>
